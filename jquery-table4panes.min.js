(function(n){var e=function(n){var i=new Array(this.children.length),t,f,r,e,o,u;if(Array.prototype.fill)i.fill(n);else for(t=0;t<this.children.length;t++)i[t]=n;for(t=0;t<this.children.length;t++)for(f=this.children[t],r=0;r<i[t]&&r<f.children.length;r++)for(e=f.children[r],o=e.colSpan-1,u=1;u<e.rowSpan&&t+u<i.length;u++)i[t+u]-=1+o;return i},r=function(n,t){var h=this,o=h.cloneNode(!1),s,f,i,u,c;for(o.removeAttribute("id"),s=null,f=0;f<h.children.length&&t>0;f++)i=h.children[f],u=i.nodeName.toLowerCase(),u=="thead"||u=="tbody"||u=="tr"&&n=="col"?(u=="tr"&&n=="col"&&(s==null&&(s=e.call(this,t)),t=s[f]),c=o.appendChild(r.call(i,n,t)),n=="row"&&(t-=c.children.length),i.children.length<=0&&(i.parentNode.removeChild(i),f--)):(u=="tr"||u=="th"||u=="td")&&(o.appendChild(i),f--,t-=i.colSpan||1);return o},c=function(t){var i=[];return n(this).find("tr:eq("+t+")").children().each(function(t,r){i.push(n(r).width())}),i},o=function(){var t=[];return n(this).find("tr").each(function(i,r){t.push(Math.ceil(n(r).height()))}),t},u=function(i,r){return n(this).find("tr:eq("+r+")").children().each(function(r,u){t.call(n(u),i[r])}),n(this)},s=function(i){return n(this).find("tr").slice(i[0],i[1]+1).each(function(i,r){n(r).children().each(function(i,r){t.call(n(r),Math.ceil(n(r).width()))})}),n(this)},f=function(t){return n(this).find("tr").each(function(r,u){i.call(n(u),t[r])}),n(this)},t=function(t){return n(this).width(t),n(this).css({"min-width":t,"max-width":t}),n(this)},i=function(t){return n(this).height(t),n(this).css({"min-height":t,"max-height":t}),n(this)},h=function(t){var i={},r=n("<tr>"),u;return n(this).find("tr:first").children().each(function(n,t){for(var i=0;i<t.colSpan;i++)r.append("<td>")}),n(this).find("tr:last").after(r),u=[],r.children().each(function(t,i){u.push(n(i).width())}),i.left_widths=u.slice(0,t),i.right_widths=u.slice(t),i.$right_tr=r.remove(),i.$left_tr=n("<tr>").append(r.find("td:lt("+t+")")),i};n.fn.table4panes=function(e,c,l){var y="table4panes",ft,a,rt,ut,ot,st;l&&l.prefix&&(y=l.prefix);ft=[0,c];l&&l["fix-width-rows"]&&(ft=l["fix-width-rows"]);var k=n(this).attr("id"),ht=k+"-table4panes",ct=k+"-left",lt=k+"-right",at=k+"-top-left",vt=k+"-bottom-left",yt=k+"-top-right",pt=k+"-bottom-right";n(this).css({"table-layout":"fixed"});n(this).addClass("pane");a=null;ft=="dummy"?a=h.call(n(this),e):s.call(n(this),ft);var et=o.call(n(this)),p=n(this).wrap("<div id='"+ht+"'>").parent(),w=n(this),d=n(r.call(w[0],"col",e)),it=w.wrap("<div id='"+lt+"'>").parent(),tt=d.wrap("<div id='"+ct+"'>").parent();f.call(w,et);f.call(d,et);rt=n(r.call(w[0],"row",c));ut=n(r.call(d[0],"row",c));w.before(rt);d.before(ut);it.before(tt);a&&(ut.find("tr:first").before(a.$left_tr),u.call(ut,a.left_widths,0),d.find("tr:first").before(a.$left_tr.clone()),u.call(d,a.left_widths,0),rt.find("tr:first").before(a.$right_tr),u.call(rt,a.right_widths,0),w.find("tr:first").before(a.$right_tr.clone()),u.call(w,a.right_widths,0));var g=w.wrap("<div id='"+pt+"'>").parent(),v=d.wrap("<div id='"+vt+"'>").parent(),b=rt.wrap("<div id='"+yt+"'>").parent(),nt=ut.wrap("<div id='"+at+"'>").parent();p.addClass(y);it.addClass(y+"-right");tt.addClass(y+"-left");nt.addClass(y+"-top");b.addClass(y+"-top");v.addClass(y+"-bottom");g.addClass(y+"-bottom");g.css({"overflow-x":"scroll","overflow-y":"scroll"});b.css({"overflow-x":"hidden","overflow-y":"scroll"});v.css({"overflow-x":"scroll","overflow-y":"hidden"});nt.css({"overflow-x":"hidden","overflow-y":"hidden"});switch(l["display-method"]){case"inline-block":tt.css({display:"inline-block"});it.css({display:"inline-block"});break;case"table-cell":p.css({display:"table","table-layout":"fixed",margin:"0 auto"});tt.css({display:"table-cell"});it.css({display:"table-cell"});break;case"flex":p.css({display:"flex"});break;case"float":default:tt.css({float:"left"})}return n.each(l,function(n){switch(n){case"height":i.call(p,l[n]);break;case"top-height":i.call(nt,l[n]);i.call(b,l[n]);break;case"bottom-height":i.call(v,l[n]);i.call(g,l[n]);break;case"width":t.call(p,l[n]);break;case"left-width":t.call(nt,l[n]);t.call(v,l[n]);break;case"right-width":t.call(b,l[n]);t.call(g,l[n])}}),l.fit&&(ot=it.outerWidth(!0)-b.width(),st=v.outerHeight(!0)-v.height(),n(window).resize(function(){var n=p.width()-tt.outerWidth(!0)-ot,r=p.height()-nt.outerHeight(!0)-st;t.call(b,n);t.call(g,n);i.call(v,r);i.call(g,r)}),n(window).trigger("resize")),l.css&&n.each(l.css,function(t,i){n(t).css(i)}),l.callbacks&&n.each(l.callbacks,function(t,i){n(t).on(i.event,i.data,i.func)}),b.scroll(function(){nt.scrollTop(n(this).scrollTop())}),v.scroll(function(){nt.scrollLeft(n(this).scrollLeft())}),g.scroll(function(){v.scrollTop(n(this).scrollTop());b.scrollLeft(n(this).scrollLeft())}),p}})(jQuery)