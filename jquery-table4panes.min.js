(function(n){var e=function(n){var i=new Array(this.children.length),t,f,r,e,o,u;if(Array.prototype.fill)i.fill(n);else for(t=0;t<this.children.length;t++)i[t]=n;for(t=0;t<this.children.length;t++)for(f=this.children[t],r=0;r<i[t]&&r<f.children.length;r++)for(e=f.children[r],o=e.colSpan-1,u=1;u<e.rowSpan&&t+u<i.length;u++)i[t+u]-=1+o;return i},r=function(n,t){var h=this,o=h.cloneNode(!1),s,f,u,i,c;if(o.removeAttribute("id"),t<=0)return o;for(s=null,f=0;f<h.children.length;f++)if(u=h.children[f],i=u.nodeName.toLowerCase(),i=="thead"||i=="tbody"||i=="tr"&&n=="col"){if(i=="tr"&&n=="col"&&(s==null&&(s=e.call(this,t)),t=s[f]),c=o.appendChild(r.call(u,n,t)),n=="row"&&(t-=c.children.length,t<=0))break;i!="tr"&&u.children.length<=0&&(u.parentNode.removeChild(u),f--)}else if((i=="tr"||i=="th"||i=="td")&&(o.appendChild(u),f--,t-=u.colSpan||1,t<=0))break;return o},c=function(t){var i=[];return n(this).find("tr:eq("+t+")").children().each(function(t,r){i.push(n(r).width())}),i},o=function(){var t=[];return n(this).find("tr").each(function(i,r){t.push(Math.ceil(n(r).height()))}),t},u=function(i,r){return n(this).find("tr:eq("+r+")").children().each(function(r,u){t.call(n(u),i[r])}),n(this)},s=function(i){return n(this).find("tr").slice(i[0],i[1]+1).each(function(i,r){n(r).children().each(function(i,r){t.call(n(r),Math.ceil(n(r).width()))})}),n(this)},f=function(t){return n(this).find("tr").each(function(r,u){i.call(n(u),t[r])}),n(this)},t=function(t){return n(this).width(t),n(this).css({"min-width":t,"max-width":t}),n(this)},i=function(t){return n(this).height(t),n(this).css({"min-height":t,"max-height":t}),n(this)},h=function(t){var i={},r=n("<tr>"),u;return n(this).find("tr:first").children().each(function(n,t){for(var i=0;i<t.colSpan;i++)r.append("<td>")}),n(this).find("tr:last").after(r),u=[],r.children().each(function(t,i){u.push(n(i).width())}),i.left_widths=u.slice(0,t),i.right_widths=u.slice(t),i.$right_tr=r.remove(),i.$left_tr=n("<tr>").append(r.find("td:lt("+t+")")),i};n.fn.table4panes=function(e,c,l){var v,ft,a,rt,ut,st,ht;if(!(n(this).length<=0)){var k=n(this).attr("id"),et=k+"-table4panes",ct=k+"-left",lt=k+"-right",at=k+"-top-left",vt=k+"-bottom-left",yt=k+"-top-right",pt=k+"-bottom-right";if(!(n("#"+et).length>0)){v="table4panes";l&&l.prefix&&(v=l.prefix);ft=[0,c];l&&l["fix-width-rows"]&&(ft=l["fix-width-rows"]);n(this).css({"table-layout":"fixed"});n(this).addClass("pane");a=null;ft=="dummy"?a=h.call(n(this),e):s.call(n(this),ft);var ot=o.call(n(this)),p=n(this).wrap("<div id='"+et+"'>").parent(),w=n(this),d=n(r.call(w[0],"col",e)),it=w.wrap("<div id='"+lt+"'>").parent(),tt=d.wrap("<div id='"+ct+"'>").parent();f.call(w,ot);f.call(d,ot);rt=n(r.call(w[0],"row",c));ut=n(r.call(d[0],"row",c));w.before(rt);d.before(ut);it.before(tt);a&&(ut.find("tr:first").before(a.$left_tr),u.call(ut,a.left_widths,0),d.find("tr:first").before(a.$left_tr.clone()),u.call(d,a.left_widths,0),rt.find("tr:first").before(a.$right_tr),u.call(rt,a.right_widths,0),w.find("tr:first").before(a.$right_tr.clone()),u.call(w,a.right_widths,0));var g=w.wrap("<div id='"+pt+"'>").parent(),y=d.wrap("<div id='"+vt+"'>").parent(),b=rt.wrap("<div id='"+yt+"'>").parent(),nt=ut.wrap("<div id='"+at+"'>").parent();p.addClass(v);it.addClass(v+"-right");tt.addClass(v+"-left");nt.addClass(v+"-top");b.addClass(v+"-top");y.addClass(v+"-bottom");g.addClass(v+"-bottom");g.css({"overflow-x":"scroll","overflow-y":"scroll"});b.css({"overflow-x":"hidden","overflow-y":"scroll"});y.css({"overflow-x":"scroll","overflow-y":"hidden"});nt.css({"overflow-x":"hidden","overflow-y":"hidden"});switch(l["display-method"]){case"inline-block":tt.css({display:"inline-block"});it.css({display:"inline-block"});break;case"table-cell":p.css({display:"table","table-layout":"fixed",margin:"0 auto"});tt.css({display:"table-cell"});it.css({display:"table-cell"});break;case"flex":p.css({display:"flex"});break;case"float":default:tt.css({float:"left"})}return n.each(l,function(n){switch(n){case"height":i.call(p,l[n]);break;case"top-height":i.call(nt,l[n]);i.call(b,l[n]);break;case"bottom-height":i.call(y,l[n]);i.call(g,l[n]);break;case"width":t.call(p,l[n]);break;case"left-width":t.call(nt,l[n]);t.call(y,l[n]);break;case"right-width":t.call(b,l[n]);t.call(g,l[n])}}),l.fit&&(st=it.outerWidth(!0)-b.width(),ht=y.outerHeight(!0)-y.height(),n(window).resize(function(){var n=p.width()-tt.outerWidth(!0)-st,r=p.height()-nt.outerHeight(!0)-ht;t.call(b,n);t.call(g,n);i.call(y,r);i.call(g,r)}),n(window).trigger("resize")),l.css&&n.each(l.css,function(t,i){n(t).css(i)}),l.callbacks&&n.each(l.callbacks,function(t,i){n.isArray(i)||(i=[i]);n.each(i,function(i,r){n(t).on(r.event,r.data,r.func)})}),b.scroll(function(){nt.scrollTop(n(this).scrollTop())}),y.scroll(function(){nt.scrollLeft(n(this).scrollLeft())}),g.scroll(function(){y.scrollTop(n(this).scrollTop());b.scrollLeft(n(this).scrollLeft())}),p}}}})(jQuery)