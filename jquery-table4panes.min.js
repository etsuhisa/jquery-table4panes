;(function($){/***getSubtractedNums(num)*Getthearraywiththenumberofrowspansubtracted.*@paramthis(in)parentnodeoftr*@paramnum(in)numbertomove*@return arrayofnumberofcolumntomove.*/var getSubtractedNums=function(num){var nums=new Array(this.children.length).fill(num);for(var i=0;i<this.children.length;i++){var tr=this.children[i];for(var j=0;j<nums[i]&&j<tr.children.length;j++){var td=tr.children[j];var colspan=td.colSpan-1;for(var k=1;k<td.rowSpan&&i+k<nums.length;k++){nums[i+k]-=1+colspan;}}}return nums;};/***moveToNewTable(kind,num)*Moverows/columnstoanewlycreatedtablethatinheritsthesourcetable/thead/tbody.*Thefunction treatstheDOMobjectonly,expectthis.*@paramthis(in)sourcetablenode*@paramkind(in)"row","col"*@paramnum(in)numbertomove*@return thecreatedtable*/var moveToNewTable=function(kind,num){var src=this;var dst=src.cloneNode(false);dst.removeAttribute("id");var nums=null;for(var i=0;i<src.children.length&&num>0;i++){var elm=src.children[i];var tag=elm.nodeName.toLowerCase();if(tag=="thead"||tag=="tbody"||(tag=="tr"&&kind=="col")){if(tag=="tr"&&kind=="col"){if(nums==null){nums=getSubtractedNums.call(this,num);}num=nums[i];}dst.appendChild(moveToNewTable.call(elm,kind,num));if(kind=="row"){num-=dst.children.length;}if(elm.children.length<=0){elm.remove();i--;}}else if(tag=="tr"||tag=="th"||tag=="td"){dst.appendChild(elm);i--;num-=(elm.colSpan||1);}}return dst;};/***getHeightRows()*@paramthis(in)tablenode*@return thearrayofheightofallrows.*/var getHeightRows=function(){var arr=[];$(this).find("tr").each(function(i,elm){arr.push($(elm).height());});return arr;};/***setWidthCols(row_num)*Setwidthofallcolumns in thespecifiedrows.*@paramthis(in)tablenode*@paramrow_num(in)numberofrowstosetwidth.*@return this*/var setWidthCols=function(row_num){$(this).find("tr:lt("+row_num+")").each(function(i,tr){$(tr).children().each(function(j,elm){setFixWidth.call($(elm),$(elm).width());});});return $(this);};/***setHeightRows(arr)*Setheightofallrows.*@paramthis(in)tablenode*@paramarr(in)heightofrows*@return this.*/var setHeightRows=function(arr){$(this).find("tr").each(function(i,elm){setFixHeight.call($(elm),arr[i]);});return $(this);};/***setFixWidth(val)*Setwidth/min-width/max-widthofthenode.*@paramthis(in)targetnode*@paramval(in)width*@return this.*/var setFixWidth=function(val){$(this).width(val);$(this).css({"min-width":val,"max-width":val});return $(this);};/***setFixHeight(val)*Setheight/min-height/max-heightofthenode.*@paramthis(in)targetnode*@paramval(in)height*@return this.*/var setFixHeight=function(val){$(this).height(val);$(this).css({"min-height":val,"max-height":val});return $(this);};/***Callthisfunction tosplitthetabletofourpanes.*/$.fn.table4panes=function(col_num,row_num,settings){var prefix="table4panes";if(settings&&settings["prefix"])prefix=settings["prefix"];fix_width_rows=row_num+1;if(settings&&settings["fix-width-rows"])fix_width_rows=settings["fix-width-rows"];var id_table=$(this).attr("id");var id_table4panes=id_table+"-table4panes";var id_left=id_table+"-left";var id_right=id_table+"-right";var id_top_left=id_table+"-top-left";var id_bottom_left=id_table+"-bottom-left";var id_top_right=id_table+"-top-right";var id_bottom_right=id_table+"-bottom-right";$(this).css({"table-layout":"fixed"});$(this).addClass("pane");setWidthCols.call($(this),fix_width_rows);var row_heights=getHeightRows.call($(this));var $div_table4panes=$(this).wrap("<div id='"+id_table4panes+"'>").parent();var $table_bottom_right=$(this);var $table_bottom_left=$(moveToNewTable.call($table_bottom_right[0],"col",col_num));var $div_right=$table_bottom_right.wrap("<div id='"+id_right+"'>").parent();var $div_left=$table_bottom_left.wrap("<div id='"+id_left+"'>").parent();setHeightRows.call($table_bottom_right,row_heights);setHeightRows.call($table_bottom_left,row_heights);var $table_top_right=$(moveToNewTable.call($table_bottom_right[0],"row",row_num));var $table_top_left=$(moveToNewTable.call($table_bottom_left[0],"row",row_num));$table_bottom_right.before($table_top_right);$table_bottom_left.before($table_top_left);$div_right.before($div_left);var $div_bottom_right=$table_bottom_right.wrap("<div id='"+id_bottom_right+"'>").parent();var $div_bottom_left=$table_bottom_left.wrap("<div id='"+id_bottom_left+"'>").parent();var $div_top_right=$table_top_right.wrap("<div id='"+id_top_right+"'>").parent();var $div_top_left=$table_top_left.wrap("<div id='"+id_top_left+"'>").parent();$div_table4panes.addClass(prefix);$div_right.addClass(prefix+"-right");$div_left.addClass(prefix+"-left");$div_top_left.addClass(prefix+"-top");$div_top_right.addClass(prefix+"-top");$div_bottom_left.addClass(prefix+"-bottom");$div_bottom_right.addClass(prefix+"-bottom");$div_bottom_right.css({"overflow-x":"scroll","overflow-y":"scroll"});$div_top_right.css({"overflow-x":"hidden","overflow-y":"scroll"});$div_bottom_left.css({"overflow-x":"scroll","overflow-y":"hidden"});$div_top_left.css({"overflow-x":"hidden","overflow-y":"hidden"});switch(settings["display-method"]){case"inline-block":$div_left.css({"display":"inline-block"});$div_right.css({"display":"inline-block"});break;case"table-cell":$div_table4panes.css({"display":"table","table-layout":"fixed","margin":"0 auto"});$div_left.css({"display":"table-cell"});$div_right.css({"display":"table-cell"});break;case"flex":$div_table4panes.css({"display":"flex"});break;case"float":default:$div_left.css({"float":"left"});break;}$.each(settings,function(param,value){switch(param){case"height":setFixHeight.call($div_table4panes,settings[param]);break;case"top-height":setFixHeight.call($div_top_left,settings[param]);setFixHeight.call($div_top_right,settings[param]);break;case"bottom-height":setFixHeight.call($div_bottom_left,settings[param]);setFixHeight.call($div_bottom_right,settings[param]);break;case"width":setFixWidth.call($div_table4panes,settings[param]);break;case"left-width":setFixWidth.call($div_top_left,settings[param]);setFixWidth.call($div_bottom_left,settings[param]);break;case"right-width":setFixWidth.call($div_top_right,settings[param]);setFixWidth.call($div_bottom_right,settings[param]);break;}});if(settings["fit"]){var dw=$div_right.outerWidth(true)-$div_top_right.width();var dh=$div_bottom_left.outerHeight(true)-$div_bottom_left.height();$(window).resize(function(){var w=$div_table4panes.width()-$div_left.outerWidth(true)-dw;var h=$div_table4panes.height()-$div_top_left.outerHeight(true)-dh;setFixWidth.call($div_top_right,w);setFixWidth.call($div_bottom_right,w);setFixHeight.call($div_bottom_left,h);setFixHeight.call($div_bottom_right,h);});$(window).trigger('resize');}if(settings["css"]){$.each(settings["css"],function(sel,map){$(sel).css(map);});}if(settings["callbacks"]){$.each(settings["callbacks"],function(sel,action){$(sel).on(action.event,action.data,action.func);});}$div_top_right.scroll(function(){$div_top_left.scrollTop($(this).scrollTop());});$div_bottom_left.scroll(function(){$div_top_left.scrollLeft($(this).scrollLeft());});$div_bottom_right.scroll(function(){$div_bottom_left.scrollTop($(this).scrollTop());$div_top_right.scrollLeft($(this).scrollLeft());});return $div_table4panes;};})(jQuery);